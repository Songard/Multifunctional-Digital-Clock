<!DOCTYPE html>
<html lang="cn"
    style="height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f4f4f4;
        color: #333;
        margin: 0;
        padding: 0;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    button:hover {
        background-color: #ddd;
        cursor: pointer;
    }


    /* 表盘大小 */
    #clock {
        border: 4px solid #555555;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        height: 300px;
        width: 300px;
    }

    #line-hand {
        stroke-linecap: round;
    }

    #hour-hand { stroke: #333; }
    #minute-hand { stroke: #666; }
    #second-hand { stroke: #ff6347; }

    
    /* 表盘上的刻度数字 */
    .number {
        font-family: Arial, sans-serif;
        font-size: 20px;
        text-anchor: middle;
    }

        /* 表盘上的刻度数字 */
        .number {
            font-family: Arial, sans-serif;
            font-size: 20px;
            text-anchor: middle;
        }

        /* 数字时间显示 */
        #timeDisplay {
            font-family: Arial, sans-serif;
            font-size: 24px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 300px;
            text-align: center;
        }

        #timeInput {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 10px;
        }

        #timeInput input {
            width: 50px;
            text-align: center;
            margin: 0 5px;
        }

        #setTimeButton {
            margin-left: 10px;
        }

        #currentTimeButton {
            margin-top: 10px;
        }

        /* 日期显示 */
        #dateDisplay {
            font-family: Arial, sans-serif;
            font-size: 24px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 300px;
            text-align: center;
            margin-top: 10px;
        }

        #dateInput {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 10px;
        }

        #dateInput input {
            width: 70px;
            text-align: center;
            margin: 0 5px;
        }

        #setDateButton {
            margin-left: 10px;
        }



    #timeDisplay, #dateDisplay {
        padding: 10px;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin-top: 10px;
    }
    input[type="number"] {
        width: 70px;
        padding: 5px;
        margin: 0 5px;
        border: 1px solid #ddd;
        border-radius: 3px;
        text-align: center;
    }

    input[type="number"]:focus {
        border-color: #555;
        box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
    }

    /* 表盘上的数字不可选中*/
    .numbers .number {
    user-select: none;
    }

    </style>
</head>

<body class="body">
    <!-- 利用SVG画图实现的表盘时钟，需注意中心点统一 -->
    <svg id="clock" width="300px" height="300px" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
        <!-- 表盘 -->
        <circle id="clock-face" cx="150" cy="150" r="140" stroke="black" stroke-width="2" fill="lightgray" />
        <!-- 时针，分针，秒针 -->
        <line x1="150" y1="150" x2="150" y2="70" stroke="black" stroke-width="5" id="hour-hand" />
        <line x1="150" y1="150" x2="150" y2="50" stroke="black" stroke-width="3" id="minute-hand" />
        <line x1="150" y1="150" x2="150" y2="40" stroke="red" stroke-width="1" id="second-hand" />
        <!-- 中心点装饰 -->
        <circle cx="150" cy="150" r="4" stroke="black" stroke-width="2" fill="gray" />
        <!-- 表盘上的刻度数字 -->
        <g id="numbers" class="numbers" transform="translate(150,150)">
            <text x="0" y="-107" class="number">12</text>
            <text x="115" y="7" class="number">3</text>
            <text x="0" y="120" class="number">6</text>
            <text x="-115" y="7" class="number">9</text>
        </g>
        <!-- 表盘上的刻度线 -->
        <g id="ticks" transform="translate(150,150)">
            <line x1="0" y1="-120" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(30)" />
            <line x1="0" y1="-120" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(60)" />
            <line x1="0" y1="-125" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(90)" />
            <line x1="0" y1="-120" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(120)" />
            <line x1="0" y1="-120" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(150)" />
            <line x1="0" y1="-125" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(180)" />
            <line x1="0" y1="-120" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(210)" />
            <line x1="0" y1="-120" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(240)" />
            <line x1="0" y1="-125" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(270)" />
            <line x1="0" y1="-120" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(300)" />
            <line x1="0" y1="-120" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(330)" />
            <line x1="0" y1="-125" x2="0" y2="-140" stroke="black" stroke-width="1.5" transform="rotate(360)" />
            <!-- 分针刻度 -->
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(0)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(6)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(12)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(18)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(24)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(30)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(36)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(42)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(48)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(54)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(60)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(66)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(72)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(78)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(84)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(90)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(96)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(102)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(108)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(114)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(120)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(126)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(132)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(138)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(144)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(150)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(156)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(162)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(168)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(174)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(180)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(186)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(192)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(198)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(204)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(210)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(216)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(222)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(228)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(234)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(240)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(246)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(252)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(258)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(264)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(270)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(276)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(282)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(288)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(294)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(300)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(306)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(312)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(318)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(324)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(330)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(336)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(342)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(348)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(354)" />
            <line x1="0" y1="-130" x2="0" y2="-140" stroke="black" stroke-width="0.5" transform="rotate(360)" />
        </g>

    </svg>


    <!-- 错误信息显示 -->
    <div id="errorMessage" style="color: red; margin-top: 10px;"></div>



    <script>
        var clockInterval;
        var userSetHours = 0;
        var userSetMinutes = 0;
        var userSetSeconds = 0;
        var isPM = false;
        var userSetYear, userSetMonth, userSetDay;

        // 从URL查询字符串中获取时间参数
        function getTimeParams() {
            var params = new URLSearchParams(window.location.search);
            var hours = parseInt(params.get('hours')) || 0;
            var minutes = parseInt(params.get('minutes')) || 0;
            var seconds = parseInt(params.get('seconds')) || 0;
            return { hours, minutes, seconds };
        }

        // 更新时钟函数，以输入的时分秒为参数进行设置，若没有输入则默认获取系统时间
        function updateClock(hours, minutes, seconds) {
            userSetHours = hours;
            userSetMinutes = minutes;
            userSetSeconds = seconds;

            var hourHand = document.getElementById('hour-hand');
            var minuteHand = document.getElementById('minute-hand');
            var secondHand = document.getElementById('second-hand');
            var clockFace = document.getElementById('clock-face'); // 获取表盘元素

            // 计算时分秒对应指针的角度
            var hourDeg = (360 / 12) * (userSetHours % 12) + (360 / 12) * (userSetMinutes / 60);
            var minuteDeg = (360 / 60) * userSetMinutes;
            var secondDeg = (360 / 60) * userSetSeconds;

            hourHand.setAttribute('transform', `rotate(${hourDeg}, 150, 150)`);
            minuteHand.setAttribute('transform', `rotate(${minuteDeg}, 150, 150)`);
            secondHand.setAttribute('transform', `rotate(${secondDeg}, 150, 150)`);

            // 根据时间设置表盘背景颜色
            if (userSetHours >= 6 && userSetHours < 18) {
                clockFace.setAttribute('fill', 'rgba(255,255,240,0.8)'); // 奶白色
            } else {
                clockFace.setAttribute('fill', 'lightgray'); // 浅灰色
            }
        }

        // 在有初始时间的基础上不断更新时间，为保证平滑更新周期为0.01s
        function startClock() {
            clearInterval(clockInterval);
            clockInterval = setInterval(function () {
                userSetSeconds += 0.01;
                if (userSetSeconds > 59.999) {
                    userSetSeconds = 0;
                    userSetMinutes++;
                    if (userSetMinutes >= 60) {
                        userSetMinutes = 0;
                        userSetHours++;
                        if (userSetHours >= 24) {
                            userSetHours = 0;
                        }
                    }
                }
                updateClock(userSetHours, userSetMinutes, userSetSeconds);
            }, 10);
        }

        function onURLParamsChange() {
            var time = getTimeParams();
            if (time.hours !== userSetHours || time.minutes !== userSetMinutes || time.seconds !== userSetSeconds) {
                updateClock(time.hours, time.minutes, time.seconds);
                startClock();
            }
        }
        window.addEventListener('hashchange', onURLParamsChange);

        // 初始化时钟，获取URL传入时间并显示
        (function () {
            var time = getTimeParams()
            var hours = time.hours;
            var minutes = time.minutes;
            var seconds = time.seconds;
            isPM = hours >= 12;
            updateClock(hours, minutes, seconds);
            startClock();
        })();




        // 更新时间和日期函数（重置当前时间同时需要重置日期）
        // function updateClockAndDate(hours, minutes, seconds, year, month, day) {
        //     updateClock(hours, minutes, seconds);
        //
        //     userSetYear = year;
        //     userSetMonth = month;
        //     userSetDay = day;
        //
        //     var dateDisplay = document.getElementById('dateDisplay');
        //     var formattedDate = `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
        //     dateDisplay.textContent = formattedDate;
        // }

        // 初始化时钟和日期
        // (function () {
        //     var time = new Date();
        //     var hours = time.getHours();
        //     var minutes = time.getMinutes();
        //     var seconds = time.getSeconds();
        //     var year = time.getFullYear();
        //     var month = time.getMonth() + 1;
        //     var day = time.getDate();
        //     isPM = hours >= 12;
        //     // updateClockAndDate(hours, minutes, seconds, year, month, day);
        //     updateClock(hours, minutes, seconds)
        //     startClock();
        // })();



        // document.getElementById('hour-hand').addEventListener('mousedown', handleMouseDown);
        // document.getElementById('minute-hand').addEventListener('mousedown', handleMouseDown);
        // document.getElementById('second-hand').addEventListener('mousedown', handleMouseDown);

        // function handleMouseDown(event) {
        //     var element = event.target;
        //     var clock = document.getElementById('clock');
        //     var rect = clock.getBoundingClientRect();
        //     var startAngle = getAngle(event.clientX - rect.left, event.clientY - rect.top);
        //     var crossedZeroClockwise = false;
        //     var crossedZeroCounterClockwise = false;

        //     function moveHandler(event) {
        //         var currentAngle = getAngle(event.clientX - rect.left, event.clientY - rect.top);
        //         var deltaAngle = currentAngle - startAngle;
        //         if (deltaAngle < -180) deltaAngle += 360;
        //         if (deltaAngle > 180) deltaAngle -= 360;

        //         if (element.id === 'hour-hand') {
        //             if (startAngle > 270 && currentAngle < 90) {
        //                 crossedZeroClockwise = true;
        //             } else if (startAngle < 90 && currentAngle > 270) {
        //                 crossedZeroCounterClockwise = true;
        //             }
        //             if (crossedZeroCounterClockwise && currentAngle > 180) {
        //                 // 日期-1
        //                 changeDate(-1);
        //                 isPM = !isPM;
        //                 crossedZeroCounterClockwise = false;
        //             } else if (crossedZeroClockwise && currentAngle < 180) {
        //                 // 日期+1
        //                 changeDate(1);
        //                 isPM = !isPM;
        //                 crossedZeroClockwise = false;
        //             }
        //         }
        //         if (element.id === 'minute-hand') {
        //             if (startAngle > 270 && currentAngle < 90) {
        //                 crossedZeroClockwise = true;
        //             } else if (startAngle < 90 && currentAngle > 270) {
        //                 crossedZeroCounterClockwise = true;
        //             }
        //             if (crossedZeroCounterClockwise && currentAngle > 180) {
        //                 userSetHours = (userSetHours + 23) % 24;
        //                 crossedZeroCounterClockwise = false;
        //             } else if (crossedZeroClockwise && currentAngle < 180) {
        //                 userSetHours = (userSetHours + 1) % 24;
        //                 crossedZeroClockwise = false;
        //             }
        //         }
        //         if (element.id === 'second-hand') {
        //             if (startAngle > 270 && currentAngle < 90) {
        //                 crossedZeroClockwise = true;
        //             } else if (startAngle < 90 && currentAngle > 270) {
        //                 crossedZeroCounterClockwise = true;
        //             }
        //             if (crossedZeroCounterClockwise && currentAngle > 180) {
        //                 userSetMinutes = (userSetMinutes + 59) % 60;
        //                 crossedZeroCounterClockwise = false;
        //             } else if (crossedZeroClockwise && currentAngle < 180) {
        //                 userSetMinutes = (userSetMinutes + 1) % 60;
        //                 crossedZeroClockwise = false;
        //             }
        //         }

        //         // 直接更新指针角度
        //         updateHandAngle(element, currentAngle);

        //         // 更新起始角度
        //         startAngle = currentAngle;
        //     }

        //     function upHandler() {
        //         document.removeEventListener('mousemove', moveHandler);
        //         document.removeEventListener('mouseup', upHandler);
        //     }

        //     document.addEventListener('mousemove', moveHandler);
        //     document.addEventListener('mouseup', upHandler);
        // }

        // 改变日期函数
        // function changeDate(deltaDays) {
        //     var date = new Date(userSetYear, userSetMonth - 1, userSetDay + deltaDays);
        //     userSetYear = date.getFullYear();
        //     userSetMonth = date.getMonth() + 1;
        //     userSetDay = date.getDate();
        //     updateClockAndDate(userSetHours, userSetMinutes, userSetSeconds, userSetYear, userSetMonth, userSetDay);
        // }

        // function updateHandAngle(element, angle) {
        //     var transformOrigin = "rotate(" + angle + " 150 150)";
        //     element.setAttribute("transform", transformOrigin);
        //
        //     // 计算并更新时间
        //     var hours = userSetHours;
        //     var minutes = userSetMinutes;
        //     var seconds = userSetSeconds;
        //
        //     if (element.id === 'hour-hand') {
        //         hours = Math.floor(angle / 30);
        //         if (isPM) {
        //             userSetHours = (hours + 12) % 24;
        //         } else {
        //             userSetHours = hours % 12;
        //         }
        //     } else if (element.id === 'minute-hand') {
        //         minutes = Math.floor(angle / 6);
        //         userSetMinutes = (minutes + 60) % 60;
        //     } else if (element.id === 'second-hand') {
        //         seconds = Math.floor(angle / 6);
        //         userSetSeconds = (seconds + 60) % 60;
        //     }
        //
        //     // 更新时间显示
        //     var timeDisplay = document.getElementById('timeDisplay');
        //     var formattedTime = `${userSetHours.toString().padStart(2, '0')}:${userSetMinutes.toString().padStart(2, '0')}:${Math.floor(userSetSeconds).toString().padStart(2, '0')}`;
        //     timeDisplay.textContent = formattedTime;
        // }

        // function getAngle(x, y) {
        //     var centerX = 150;
        //     var centerY = 150;
        //     var angle = Math.atan2(y - centerY, x - centerX) * (180 / Math.PI);
        //     return (angle + 90 + 360) % 360; // 90度偏移是debug出来的，推断是坐标原点对应坐标计算方式导致
        // }
        //
        // function updateHandTime(element, startTime, deltaAngle) {
        //     var hours = startTime.hours;
        //     var minutes = startTime.minutes;
        //     var seconds = startTime.seconds;
        //
        //     if (element.id === 'hour-hand') {
        //         var deltaHours = deltaAngle / 30;
        //         hours = (startTime.hours + deltaHours) % 24;
        //         if (hours < 0) hours += 24;
        //     } else if (element.id === 'minute-hand') {
        //         var deltaMinutes = deltaAngle / 6;
        //         minutes = (startTime.minutes + deltaMinutes) % 60;
        //         if (minutes < 0) minutes += 60;
        //     } else if (element.id === 'second-hand') {
        //         var deltaSeconds = deltaAngle / 6;
        //         seconds = (startTime.seconds + deltaSeconds) % 60;
        //         if (seconds < 0) seconds += 60;
        //     }
        //
        //     hours = Math.floor(hours);
        //     minutes = Math.floor(minutes);
        //     seconds = Math.floor(seconds);
        //
        //     updateClock(hours, minutes, seconds);
        // }

        // 表盘提供一个接口，用于获取当前时间
        // 通过postMessage进行页面间通信,获取时间方式参考htmls/alarm/alarm.html
        window.addEventListener('message', (event) => {
            if (event.data.type === 'getTime') {
                // 发送时间结构体t回父页面
                if (event.source) {
                    event.source.postMessage({
                        type: 't',
                        day: userSetDay,
                        month: userSetMonth,
                        year: userSetYear,
                        hours: userSetHours,
                        minutes: userSetMinutes,
                        seconds: userSetSeconds
                    }, '*');
                } else {
                    console.error('ERROR: no source event');
                }
            }
        }, false);

        // 按下按钮的时候改变一下颜色，属于交互反馈
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('mousedown', function() {
                this.style.backgroundColor = '#ccc';
            });
            button.addEventListener('mouseup', function() {
                this.style.backgroundColor = '';
            });
        });

    </script>
</body>

</html>